<div class="textArea">
  <ng-form id="{{$ctrl.block.data.name}}" name="{{$ctrl.formName}}">
    <h3>{{ $ctrl.block.data.label }}</h3>
    <div class="flex-container">

        <textarea name="{{$ctrl.block.data.name}}"
                  ng-model="$ctrl.text"
                  ng-class="{ 'parent-submitted': $ctrl.isTopLevelFormSubmitted }"
                  ng-model-options="$ctrl.modelOptions"
                  ng-required="{{$ctrl.block.required}}"
                  ng-focus="$ctrl.hasFocus = true"
                  ng-blur="$ctrl.hasFocus = false"
                  ng-attr-placeholder="{{$ctrl.block.data.placeholder}}"
                  ng-change="$ctrl.actionOnUserInput(this[$ctrl.formName].$valid)">
          {{$ctrl.text}}
        </textarea>

      <div class="validation-icon-right has-focus" ng-show="$ctrl.hasFocus && !$ctrl.isTopLevelFormSubmitted" aria-hidden="true">
        <span class="right fontello-icon" aria-hidden="true">&lt;</span>
      </div>

      <div class="validation-icon-right" ng-hide="!this[$ctrl.formName][$ctrl.block.data.name].$dirty && !$ctrl.isTopLevelFormSubmitted" aria-hidden="true">
        <span ng-class="{ 'invalid': this[$ctrl.formName][$ctrl.block.data.name].$invalid }" class="right fontello-icon" aria-hidden="true">{{!this[$ctrl.formName][$ctrl.block.data.name].$invalid ? $ctrl.icons.VALID_TICK : $ctrl.icons.WARNING}}</span>
      </div>

    </div>
  </ng-form>
</div>
