<div class="textArea">
  <ng-form id="{{$ctrl.block.data.name}}" name="{{$ctrl.FORM_NAME}}">
    <h3>{{ $ctrl.block.data.label }}</h3>
    <div class="flex-container">

        <textarea name="{{$ctrl.block.data.name}}"
                  ng-model="$ctrl.text"
                  ng-class="{ 'parent-submitted': $ctrl.isTopLevelFormSubmitted }"
                  ng-model-options="$ctrl.modelOptions"
                  ng-required="{{$ctrl.block.data.config.required}}"
                  ng-attr-placeholder="{{$ctrl.block.data.placeholder}}"
                  ng-focus="$ctrl.hasFocus = true"
                  ng-blur="$ctrl.hasFocus = false"
                  ng-change="$ctrl.actionOnUserInput()">
          {{$ctrl.text}}
        </textarea>

      <div class="validation-icon-right has-focus" ng-show="$ctrl.hasFocus && !$ctrl.isTopLevelFormSubmitted && !this[$ctrl.FORM_NAME][$ctrl.block.data.name].$dirty">
        <span class="right fontello-icon icon-pl-lt"></span>
      </div>

      <div class="validation-icon-right" ng-show="this[$ctrl.FORM_NAME][$ctrl.block.data.name].$dirty || $ctrl.isTopLevelFormSubmitted">
        <span ng-class="this[$ctrl.FORM_NAME][$ctrl.block.data.name].$invalid ? 'icon-pl-exclamation invalid' : 'icon-pl-tick'" class="right fontello-icon"></span>
      </div>

    </div>
  </ng-form>
</div>
